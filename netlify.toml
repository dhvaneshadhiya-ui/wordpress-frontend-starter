# Netlify configuration for OG image generation and Image CDN

# Enable Image CDN for remote WordPress images
[images]
  remote_images = ["https://dev.igeeksblog.com/.*"]

[[edge_functions]]
  function = "og"
  path = "/og"

[[headers]]
  for = "/og"
  [headers.values]
    Cache-Control = "public, s-maxage=31536000, immutable"

# Block indexing via HTTP header (staging site)
[[headers]]
  for = "/*"
  [headers.values]
    X-Robots-Tag = "noindex, nofollow"

# Build settings
[build]
  command = "npm run build"
  publish = "dist"

# Enable Pretty URLs - automatically serves /slug/index.html for /slug requests
[build.processing]
  skip_processing = false

[build.processing.html]
  pretty_urls = true

# SPA fallback - only if no static file matches
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
  force = false
